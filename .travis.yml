language: php
php:
    - '7.1'

services:
    - docker

install:
    - docker run --rm -v $(pwd):/app composer:1.8 install

script:
    - docker run --rm -v $(pwd):/root/src newtmitch/sonar-scanner sonar-scanner -X -Dproject.settings=./src/sonar-project.properties -Dsonar.login=$SONAR_TOKEN
    - docker run --rm -v $(pwd):/app phpunit/phpunit tests
